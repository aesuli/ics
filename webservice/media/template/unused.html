<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title></title>
    <script language="JavaScript">
        // gets scores from a classifier sorts label by score
        var classifier_name = $(item).text();
        $('#suggestions_'+classifier_name).show();
        $.ajax({
            type:'POST',
                url:'/service/score',
                data: { name: classifier_name, X: [text] },
                dataType: 'json',
                success: function(msg) {
                    var scores = msg[0];
                    var sorted_scores = Object.keys(scores).map(function(key) {
                        return [key, scores[key]];
                    });
                    sorted_scores.sort(function(first, second) {
                        var diff = second[1] - first[1];
                        if(diff!=0)
                            return diff;
                         return first[0].localeCompare(second[0]);
                    });
                    var scores_div = jQuery('<div id="scores" class="padded"></div>');
                    for(var i = 0;i<sorted_scores.length;++i) {
                        var scoreline = jQuery('<p class="scoreline"><span>'+sorted_scores[i][0]+'</span><span>'+sorted_scores[i][1]+'</span></p>');
                        (function() {
                            var class_name = sorted_scores[i][0];
                            scoreline.click(function(){
                                $.ajax({
                                    type:'POST',
                                    url:'/service/update',
                                    data: { name: classifier_name, X: [last_text], y: [class_name] },
                                    success: function(msg) {
                                        classify(true);
                                    }
                                });
                            });
                        }());
                        scores_div.append(scoreline);
                    }
                    $('#scores_'+classifier_name).html(scores_div);
                }
        });
    </script>
</head>
<body>

</body>
</html>